<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="I-Stein - Your intelligent Scottish assistant">
    <meta name="theme-color" content="#4f46e5">
    <title>I-Stein - Your Intelligent Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes vibrate {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            10% { transform: translate(-1px, -1px) rotate(-1deg); }
            20% { transform: translate(1px, 1px) rotate(1deg); }
            30% { transform: translate(-1px, 1px) rotate(-1deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, -1px) rotate(-1deg); }
            60% { transform: translate(1px, 1px) rotate(1deg); }
            70% { transform: translate(-1px, 1px) rotate(-1deg); }
            80% { transform: translate(1px, -1px) rotate(1deg); }
            90% { transform: translate(-1px, -1px) rotate(-1deg); }
        }
        .animate-vibrate {
            animation: vibrate 0.3s ease-in-out infinite;
        }
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="app" class="flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
        <!-- Header -->
        <div class="bg-white shadow-md px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between">
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="bg-indigo-600 p-2 rounded-full">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-white" viewBox="0 0 24 24" fill="none">
                        <defs>
                            <radialGradient id="nucleusGradient">
                                <stop offset="0%" stop-color="#fbbf24" />
                                <stop offset="100%" stop-color="#f59e0b" />
                            </radialGradient>
                            <linearGradient id="orbit1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#3b82f6" />
                                <stop offset="100%" stop-color="#8b5cf6" />
                            </linearGradient>
                            <linearGradient id="orbit2" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#ec4899" />
                                <stop offset="100%" stop-color="#f43f5e" />
                            </linearGradient>
                            <linearGradient id="orbit3" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#10b981" />
                                <stop offset="100%" stop-color="#06b6d4" />
                            </linearGradient>
                        </defs>
                        <circle cx="12" cy="12" r="2.5" fill="url(#nucleusGradient)">
                            <animate attributeName="r" values="2.5;3;2.5" dur="2s" repeatCount="indefinite" />
                        </circle>
                        <circle cx="12" cy="12" r="1.5" fill="#fef3c7" opacity="0.8" />
                        <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(0 12 12)" stroke="url(#orbit1)" stroke-width="1.5" fill="none" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                        </ellipse>
                        <circle cx="22" cy="12" r="1.5" fill="#3b82f6">
                            <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                        </circle>
                        <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(60 12 12)" stroke="url(#orbit2)" stroke-width="1.5" fill="none" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                        </ellipse>
                        <circle cx="22" cy="12" r="1.5" fill="#ec4899" transform="rotate(60 12 12)">
                            <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                        </circle>
                        <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(120 12 12)" stroke="url(#orbit3)" stroke-width="1.5" fill="none" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                        </ellipse>
                        <circle cx="22" cy="12" r="1.5" fill="#10b981" transform="rotate(120 12 12)">
                            <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                        </circle>
                    </svg>
                </div>
                <div>
                    <h1 class="text-lg sm:text-xl font-bold text-gray-800">I-Stein</h1>
                    <p class="text-xs sm:text-sm text-gray-500">Your intelligent assistant</p>
                </div>
            </div>
            <button onclick="clearChat()" class="p-2 hover:bg-gray-100 rounded-full transition-colors" title="Clear chat">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
            </button>
        </div>

        <!-- Messages -->
        <div id="messages" class="flex-1 overflow-y-auto px-4 py-4 sm:px-6 sm:py-6 space-y-4">
            <div id="welcomeMessage" class="text-center text-gray-500 mt-20">
                <svg class="w-16 h-16 mx-auto mb-4 text-indigo-400" viewBox="0 0 24 24" fill="none">
                    <defs>
                        <radialGradient id="nucleusGradient2">
                            <stop offset="0%" stop-color="#fbbf24" />
                            <stop offset="100%" stop-color="#f59e0b" />
                        </radialGradient>
                        <linearGradient id="orbit1-2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#3b82f6" />
                            <stop offset="100%" stop-color="#8b5cf6" />
                        </linearGradient>
                        <linearGradient id="orbit2-2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#ec4899" />
                            <stop offset="100%" stop-color="#f43f5e" />
                        </linearGradient>
                        <linearGradient id="orbit3-2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#10b981" />
                            <stop offset="100%" stop-color="#06b6d4" />
                        </linearGradient>
                    </defs>
                    <circle cx="12" cy="12" r="2.5" fill="url(#nucleusGradient2)">
                        <animate attributeName="r" values="2.5;3;2.5" dur="2s" repeatCount="indefinite" />
                    </circle>
                    <circle cx="12" cy="12" r="1.5" fill="#fef3c7" opacity="0.8" />
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(0 12 12)" stroke="url(#orbit1-2)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#3b82f6">
                        <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                    </circle>
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(60 12 12)" stroke="url(#orbit2-2)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#ec4899" transform="rotate(60 12 12)">
                        <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                    </circle>
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(120 12 12)" stroke="url(#orbit3-2)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#10b981" transform="rotate(120 12 12)">
                        <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                    </circle>
                </svg>
                <p class="text-lg font-medium">Och aye! How can I help ye today?</p>
                <p class="text-sm mt-2">Send a message tae get started</p>
            </div>
        </div>

        <!-- Input -->
        <div class="bg-white border-t border-gray-200 px-4 py-3 sm:px-6 sm:py-4">
            <div class="flex gap-2 sm:gap-3 max-w-4xl mx-auto">
                <input 
                    type="text" 
                    id="messageInput"
                    placeholder="Type your message..."
                    class="flex-1 px-4 py-2 sm:py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm sm:text-base"
                    onkeypress="handleKeyPress(event)"
                />
                <button 
                    onclick="sendMessage()"
                    class="bg-indigo-600 text-white p-2 sm:p-3 rounded-full hover:bg-indigo-700 transition-colors flex-shrink-0"
                >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let messages = [];

        // Atom icon component
        function createAtomIcon(isVibrating = false) {
            return `
                <svg class="w-5 h-5 text-gray-700 ${isVibrating ? 'animate-vibrate' : ''}" viewBox="0 0 24 24" fill="none">
                    <defs>
                        <radialGradient id="nucleusGradient3">
                            <stop offset="0%" stop-color="#fbbf24" />
                            <stop offset="100%" stop-color="#f59e0b" />
                        </radialGradient>
                        <linearGradient id="orbit1-3" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#3b82f6" />
                            <stop offset="100%" stop-color="#8b5cf6" />
                        </linearGradient>
                        <linearGradient id="orbit2-3" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#ec4899" />
                            <stop offset="100%" stop-color="#f43f5e" />
                        </linearGradient>
                        <linearGradient id="orbit3-3" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#10b981" />
                            <stop offset="100%" stop-color="#06b6d4" />
                        </linearGradient>
                    </defs>
                    <circle cx="12" cy="12" r="2.5" fill="url(#nucleusGradient3)">
                        <animate attributeName="r" values="2.5;3;2.5" dur="2s" repeatCount="indefinite" />
                    </circle>
                    <circle cx="12" cy="12" r="1.5" fill="#fef3c7" opacity="0.8" />
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(0 12 12)" stroke="url(#orbit1-3)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#3b82f6">
                        <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite" />
                    </circle>
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(60 12 12)" stroke="url(#orbit2-3)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#ec4899" transform="rotate(60 12 12)">
                        <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="2.5s" repeatCount="indefinite" />
                    </circle>
                    <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(120 12 12)" stroke="url(#orbit3-3)" stroke-width="1.5" fill="none" opacity="0.8">
                        <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                    </ellipse>
                    <circle cx="22" cy="12" r="1.5" fill="#10b981" transform="rotate(120 12 12)">
                        <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3.5s" repeatCount="indefinite" />
                    </circle>
                </svg>
            `;
        }

        // Load messages from localStorage
        function loadMessages() {
            const saved = localStorage.getItem('istein-messages');
            if (saved) {
                messages = JSON.parse(saved);
                renderMessages();
            }
        }

        // Save messages to localStorage
        function saveMessages() {
            localStorage.setItem('istein-messages', JSON.stringify(messages));
        }

        // Generate bot response
        function generateResponse(userMessage) {
            const msg = userMessage.toLowerCase();
            
            if (msg.match(/^(hi|hello|hey|greetings)/)) {
                return "Och, hello there! I'm I-Stein, yer intelligent assistant. How can I help ye today?";
            }
            
            if (msg.match(/how are you|how's it going|what's up/)) {
                return "Aye, I'm doing braw, thank ye fer askin'! Ready tae help ye with whatever ye need.";
            }
            
            if (msg.match(/help|what can you do|capabilities/)) {
                return "Weel now, I can answer yer questions, have a guid blether, and assist with all sorts o' tasks. Just ask away and I'll dae ma best tae help!";
            }
            
            if (msg.match(/time|date|today|day/)) {
                const now = new Date();
                return `Aye, it's currently ${now.toLocaleString()}. What can I dae fer ye?`;
            }
            
            if (msg.match(/thank|thanks|thx/)) {
                return "Och, yer most welcome! Dinnae hesitate tae ask if ye need anythin' else.";
            }
            
            if (msg.match(/bye|goodbye|see you|later/)) {
                return "Cheerio! Come back any time ye need a hand, I'll be here!";
            }
            
            if (msg.match(/your name|who are you|what are you/)) {
                return "I'm I-Stein, yer intelligent Scottish assistant! Named after the great minds o' science, I'm here tae help answer yer questions and have a bonnie chat.";
            }
            
            const defaultResponses = [
                "Och, that's interesting! Tell me more aboot that.",
                "Aye, I understand. How can I help ye with that?",
                "Thanks fer sharin'! What would ye like tae know?",
                "I'm here tae help! Could ye gie me a wee bit more detail?",
                "That's a braw question! Let me think on that...",
                "Interesting stuff! What else can I help ye with?",
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        // Render messages
        function renderMessages() {
            const container = document.getElementById('messages');
            const welcome = document.getElementById('welcomeMessage');
            
            if (messages.length === 0) {
                welcome.style.display = 'block';
                return;
            }
            
            welcome.style.display = 'none';
            
            let html = '';
            messages.forEach(msg => {
                const isUser = msg.sender === 'user';
                html += `
                    <div class="flex gap-2 sm:gap-3 ${isUser ? 'flex-row-reverse' : 'flex-row'}">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${isUser ? 'bg-indigo-600' : 'bg-gray-300'}">
                            ${isUser ? `
                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            ` : createAtomIcon(false)}
                        </div>
                        <div class="max-w-[75%] sm:max-w-[70%] rounded-2xl px-4 py-2 sm:px-4 sm:py-3 ${isUser ? 'bg-indigo-600 text-white' : 'bg-white text-gray-800 shadow-sm'}">
                            <p class="text-sm sm:text-base break-words">${msg.text}</p>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = welcome.outerHTML + html;
            scrollToBottom();
        }

        // Show typing indicator
        function showTyping() {
            const container = document.getElementById('messages');
            const typingHtml = `
                <div id="typingIndicator" class="flex gap-2 sm:gap-3">
                    <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
                        ${createAtomIcon(true)}
                    </div>
                    <div class="bg-white rounded-2xl px-4 py-3 shadow-sm">
                        <div class="flex gap-1">
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0ms;"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 150ms;"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 300ms;"></div>
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', typingHtml);
            scrollToBottom();
        }

        // Hide typing indicator
        function hideTyping() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // Scroll to bottom
        function scrollToBottom() {
            const container = document.getElementById('messages');
            container.scrollTop = container.scrollHeight;
        }

        // Send message
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            // Add user message
            messages.push({
                id: Date.now(),
                text: text,
                sender: 'user',
                timestamp: new Date().toISOString()
            });
            
            input.value = '';
            renderMessages();
            saveMessages();
            
            // Show typing
            showTyping();
            
            // Generate response after delay
            setTimeout(() => {
                hideTyping();
                
                messages.push({
                    id: Date.now() + 1,
                    text: generateResponse(text),
                    sender: 'bot',
                    timestamp: new Date().toISOString()
                });
                
                renderMessages();
                saveMessages();
            }, 800);
        }

        // Handle key press
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Clear chat
        function clearChat() {
            if (confirm('Are ye sure ye want tae clear the chat history?')) {
                messages = [];
                localStorage.removeItem('istein-messages');
                renderMessages();
            }
        }

        // Initialize
        loadMessages();
    </script>
</body>
</html>